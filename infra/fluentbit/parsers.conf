# ===========================================
# Spring Boot Log Parsers
# ===========================================

# JSON 로그 파서 (MethodLoggingAspect 출력)
[PARSER]
Name json
Format json
Time_Key @timestamp
Time_Format %Y-%m-%dT%H:%M:%S.%LZ
Time_Keep On
Decode_Field_As escaped_utf8 log message

# JSON 또는 텍스트 구분 파서
[PARSER]
Name json_or_text
Format json
Time_Key @timestamp
Time_Format %Y-%m-%dT%H:%M:%S.%LZ
Time_Keep On

# Spring Boot 텍스트 로그 파서
[PARSER]
Name spring_boot_text
Format regex
Regex ^(?<timestamp>\d {
}
-\d {
}
-\d {
}
T\d {
}
:\d {
}
:\d {
}
\.\d {
}
\+\d {
}
:\d {
}
)\s+(?<log_level>[A-Z]+)\s+(?<pid>\d+)\s+---\s+\[(?<app_name>[^\]]+)\]\s+\[(?<thread>[^\]]+)\]\s+(?<logger>\S+)\s*:\s*(?<message>.*)$
Time_Key timestamp
Time_Format %Y-%m-%dT%H:%M:%S.%L%z
Time_Keep On

# 첫 줄 감지 (멀티라인 로그용)
[PARSER]
Name spring_boot_firstline
Format regex
Regex ^\d {
}
-\d {
}
-\d {
}
T\d {
}
:\d {
}
:\d {
}
\.\d {
}
Time_Keep Off

# 멀티라인 메인 파서
[PARSER]
Name spring_boot_main
Format regex
Regex ^(?<timestamp>\d {
}
-\d {
}